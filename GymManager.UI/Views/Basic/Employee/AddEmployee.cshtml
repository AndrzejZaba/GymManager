@using GymManager.Application.Employees.Commands.AddEmployee;
@using System.Globalization;
@using GymManager.Domain.Enums;

@model AddEmployeeCommand

@{
    ViewData["Title"] = "Dodawanie nowego pracownika";
    var locale = CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;

}

@section Styles{
    <partial name="Styles/_DateTimeStyles" />
    <partial name="Styles/_SelectStyles" />
}

<div class="card card-primary card-border-top">

    @using (Html.BeginForm("AddEmployee", "Employee"))
    {
        @Html.AntiForgeryToken()

        <div class="card-body">

            <div class="form-group">
                @Html.LabelFor(x => x.Email)
                @Html.TextBoxFor(x => x.Email, new { @class = "form-control", placeholder = "Wprowadź e-mail "})
                @Html.ValidationMessageFor(x => x.Email)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.Password)
                @Html.PasswordFor(x => x.Password, new { @class = "form-control", placeholder = "Wprowadź hasło ", value = Model.Password })
                @Html.ValidationMessageFor(x => x.Password)
            </div>
            
            <div class="form-group">
                @Html.LabelFor(x => x.ConfirmPassowrd)
                @Html.PasswordFor(x => x.ConfirmPassowrd, new { @class = "form-control", placeholder = "Wprowadź ponownie hasło ", value = Model.ConfirmPassowrd })
                @Html.ValidationMessageFor(x => x.ConfirmPassowrd)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.FirstName)
                @Html.TextBoxFor(x => x.FirstName, new { @class = "form-control", placeholder="Wprowadź imię " })
                @Html.ValidationMessageFor(x => x.FirstName)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.LastName)
                @Html.TextBoxFor(x => x.LastName, new { @class = "form-control", placeholder="Wprowadź nazwisko " })
                @Html.ValidationMessageFor(x => x.LastName)
            </div>



           <div class="form-group">
                @Html.LabelFor(x => x.Country)
                @Html.TextBoxFor(x => x.Country, new { @class = "form-control", placeholder="Wprowadź kraj zamieszkania" })
                @Html.ValidationMessageFor(x => x.Country)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.City)
                @Html.TextBoxFor(x => x.City, new { @class = "form-control", placeholder="Wprowadź miejscowość zamieszkania " })
                @Html.ValidationMessageFor(x => x.City)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.ZipCode)
                @Html.TextBoxFor(x => x.ZipCode, new { @class = "form-control", placeholder="Wprowadź kod pocztowy " })
                @Html.ValidationMessageFor(x => x.ZipCode)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.Street)
                @Html.TextBoxFor(x => x.Street, new { @class = "form-control", placeholder="Wprowadź ulicę zamieszkania " })
                @Html.ValidationMessageFor(x => x.Street)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.StreetNumber)
                @Html.TextBoxFor(x => x.StreetNumber, new { @class = "form-control", placeholder="Wprowadź numer domu / bloku zamieszkania " })
                @Html.ValidationMessageFor(x => x.StreetNumber)
            </div>

            

            <div class="form-group">
                @Html.LabelFor(x => x.DateOfEmployment)
                
                <div class="input-group date" id="dtpDateOfEmployment" data-target-input="nearest">
                    <input asp-for="DateOfEmployment" type="text" class="form-control 
                        datetimepicker-input" data-target="#dtpDateOfEmployment" />
                    <div class="input-group-append" data-target="#dtpDateOfEmployment" data-toggle="datetimepicker">
                        <div class="input-group-text calendar">
                            <i class="fa fa-calendar"></i>
                        </div>
                    </div>
                </div>

                @Html.ValidationMessageFor(x => x.DateOfEmployment)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.Salary)
                @Html.TextBoxFor(x => x.Salary, "{0:n2}", new { @class = "form-control", placeholder="Wprowadź wynagrodzenie " })
                @Html.ValidationMessageFor(x => x.Salary)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.ImageUrl)
                @Html.TextBoxFor(x => x.ImageUrl, new { @class = "form-control", placeholder="Wybierz zdjęcie profilowe " })
                @Html.ValidationMessageFor(x => x.ImageUrl)
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.PositionId)
                <div class="select2-blue">

                    @Html.DropDownList("PositionId", Html.GetEnumSelectList<Position>(),
                    null, htmlAttributes: new { @class="form-control select2-PositionId", style="width: 100%;"})

                    @Html.ValidationMessageFor(x => x.PositionId)

                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(x => x.WebsiteUrl)
                @Html.TextBoxFor(x => x.WebsiteUrl, new { @class = "form-control", placeholder="Wprowadź adres strony profilowej " })
                @Html.ValidationMessageFor(x => x.WebsiteUrl)
            </div>
            
            <div class="form-group">
                @Html.LabelFor(x => x.WebsiteRaw)
                @Html.TextBoxFor(x => x.WebsiteRaw, new { @class = "form-control", placeholder="Wprowadź treść strony profilowej " })
                @Html.ValidationMessageFor(x => x.WebsiteRaw)
            </div>

        </div>

        <div class="card-footer">
            <button type="submit" class="btn btn-primary btn-lg mr-3">
            <i class="fas fa-solid fa-circle-check"></i>Zapisz
            </button>
            <a href="/Employee/Employees" class="btn btn-secondary btn-lg" role="button">
            <i class="fas fa-solid fa-cancel"></i>Anuluj
            </a>
        </div>

    }

</div>

@section Scripts{
    <partial name="Scripts/_ValidationScriptsPartial" />
    <partial name="Scripts/_DateTimeScripts" />
    <partial name="Scripts/_SelectScripts" />


    <script src="~/lib/inputmask/jquery.inputmask.bundle.min.js"></script>

    <script>
        $(document).ready(function() {

            $('#dtpDateOfEmployment').datetimepicker({
                format: 'L',
                locale: '@locale'
            });

            $('.select2-PositionId').select2({
                theme: 'bootstrap-5'
            });

            
            $("#ZipCode").inputmask("99-999", {"clearIncomplete": true, showMaskOnHover: false });

        });

       
    </script>
}